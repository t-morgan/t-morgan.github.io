<!-- attention-brand.html -->
<script>
document.addEventListener('DOMContentLoaded', () => {
  const brand = document.querySelector('.navbar .navbar-brand, .navbar .navbar-title');
  if (!brand) return;

  // Inline SVG (default: inactive lines to avoid jank)
  const svg = `
    <svg class="brand-logo" viewBox="0 0 220 80" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Tim Morgan site logo">
      <g class="tokens">
        <circle cx="20"  cy="20" r="8" class="tok t1"/>
        <circle cx="20"  cy="40" r="8" class="tok t2"/>
        <circle cx="20"  cy="60" r="8" class="tok t3"/>
        <circle cx="200" cy="40" r="10" class="tok out"/>
      </g>
      <!-- Attention lines start 'inactive' (thin/low opacity); CSS will animate to active -->
      <line x1="32" y1="20" x2="188" y2="40" class="w inactive" data-line="1"/>
      <line x1="32" y1="40" x2="188" y2="40" class="w inactive" data-line="2"/>
      <line x1="32" y1="60" x2="188" y2="40" class="w inactive" data-line="3"/>
    </svg>
    <span class="visually-hidden">Tim Morgan</span>
  `;

  // Replace brand contents with logo + hidden accessible name
  brand.innerHTML = svg;

  // After paint, activate one of 8 weight patterns
  requestAnimationFrame(() => {
    const patterns = [
      ['w2','w4','w1'], ['w4','w1','w2'], ['w3','w3','w2'], ['w1','w2','w4'],
      ['w4','w2','w1'], ['w2','w3','w3'], ['w1','w4','w2'], ['w3','w1','w4']
    ];
    const choice = patterns[Math.floor(Math.random() * patterns.length)];
    const lines = brand.querySelectorAll('line.w');
    lines.forEach((ln, i) => {
      ln.classList.remove('inactive','w1','w2','w3','w4');
      ln.classList.add(choice[i]);
    });
  });
});
</script>
